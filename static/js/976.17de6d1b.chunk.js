"use strict";(self.webpackChunkmovies_now=self.webpackChunkmovies_now||[]).push([[976],{317:(e,t,s)=>{s.d(t,{A:()=>i});s(43);var l=s(579);function i(e){let{playlists:t,onAdd:s,onClose:i,position:o}=e;return(0,l.jsxs)("div",{className:"popup-container",style:{top:o.top,left:o.left},children:[(0,l.jsx)("h3",{children:"Select a Playlist"}),(0,l.jsx)("ul",{children:t.map((e=>(0,l.jsx)("li",{children:(0,l.jsx)("button",{onClick:()=>{console.log("Adding to Playlist ID:",e.id),s?s(e.id):console.error("onAdd function is missing")},children:e.name})},e.id)))}),(0,l.jsx)("button",{className:"close-btn",onClick:i,children:"Close"})]})}},976:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var l=s(43),i=s(216),o=s(910),a=s(929),n=(s(664),s(317)),r=s(579);const d=function(e){let{playlists:t,addMovieToPlaylist:s,addShowToPlaylist:d}=e;const{query:c,type:h}=(0,i.g)(),p=(0,i.Zp)(),[v,g]=(0,l.useState)([]),[u,_]=(0,l.useState)(!0),[m,f]=(0,l.useState)(null),[j,x]=(0,l.useState)(!1),[y,w]=(0,l.useState)(null),[k,N]=(0,l.useState)({top:0,left:0});return(0,l.useEffect)((()=>{(async()=>{_(!0),f(null);try{const e=`https://api.themoviedb.org/3/search/${"movie"===h?"movie":"tv"}?api_key=808196157aa973f359929571d9321e60&query=${c}`,t=await fetch(e),s=await t.json();t.ok?(console.log("Fetched search results:",s.results),g(s.results||[])):f("Failed to fetch data")}catch(m){console.error("Error fetching search results:",m),f("Failed to fetch data")}finally{_(!1)}})()}),[c,h]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"search-results-container",children:[(0,r.jsxs)("h1",{children:["Search Results for: ",c," (","movie"===h?"Movies":"TV Shows",")"]}),(0,r.jsx)("div",{className:"results-list",children:u?(0,r.jsx)("div",{children:"Loading..."}):m?(0,r.jsxs)("div",{children:["Error: ",m]}):v.length>0?v.map((e=>(0,r.jsxs)("div",{className:"film-card",onClick:()=>(e=>{p(`/details/${h}/${e.id}`)})(e),style:{cursor:"pointer"},children:[(0,r.jsx)("img",{src:`https://image.tmdb.org/t/p/w200${e.poster_path}`,alt:e.title||e.name}),(0,r.jsx)("h3",{children:e.title||e.name}),(0,r.jsxs)("button",{className:"add-movie",onClick:t=>{t.stopPropagation(),((e,t)=>{const s=t.getBoundingClientRect();N({top:s.bottom+window.scrollY,left:s.left+window.scrollX}),w(e),x(!0)})(e,t.target)},children:[(0,r.jsx)(o.g,{className:"list-img",icon:a.ITF}),(0,r.jsxs)("p",{children:["Add ","movie"===h?"Movie":"Show"]})]}),(0,r.jsxs)("div",{className:"stars",children:[(0,r.jsx)("p",{className:"p1",children:e.release_date?e.release_date.slice(0,4):e.first_air_date?e.first_air_date.slice(0,4):"N/A"}),(0,r.jsxs)("div",{className:"p2",children:[(0,r.jsx)(o.g,{id:"rate-star",icon:a.yy}),(0,r.jsx)("p",{children:e.vote_average?e.vote_average.toFixed(1):"N/A"})]})]})]},e.id))):(0,r.jsxs)("p",{children:['No results found for "',c,'".']})})]}),j&&(0,r.jsx)(n.A,{playlists:t,onAdd:e=>{if(console.log("Selected Item before adding:",y),"tv"===h||y.first_air_date){console.log("Adding TV show to playlist");const t={id:y.id,type:"tv",title:y.name||y.title||"Untitled Show",poster_path:y.poster_path||null,release_date:y.first_air_date||"N/A",vote_average:y.vote_average||0,original_language:y.original_language||"N/A",genre_ids:y.genre_ids||[],overview:y.overview||"",backdrop_path:y.backdrop_path||null};console.log("Invoking addShowToPlaylist with:",e,t),d(e,t)}else if("movie"===h||y.release_date){console.log("Adding movie to playlist");const t={id:y.id,type:"movie",title:y.title||"Untitled Movie",poster_path:y.poster_path||null,release_date:y.release_date||"N/A",vote_average:y.vote_average||0,original_language:y.original_language||"N/A",genre_ids:y.genre_ids||[],overview:y.overview||"",backdrop_path:y.backdrop_path||null};console.log("Invoking addMovieToPlaylist with:",e,t),s(e,t)}else console.error("Unknown type for selected item:",y);x(!1)},onClose:()=>x(!1),position:k})]})}}}]);
//# sourceMappingURL=976.17de6d1b.chunk.js.map